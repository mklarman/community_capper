<% @winners = [] %>
<% @losers = [] %>
<% @update = [] %>
<% @complete = [] %>
<% @against_moves = [] %>
<% @with_moves = [] %>
<% @no_moves = [] %>
<% @low_ag = [] %>
<% @high_ag = [] %>
<% @high_wit = [] %>
<% @low_wit = [] %>
<% @high_no = [] %>
<% @low_no = [] %>
<% @totals = [] %>
<% @sides = [] %>
<% @over_plays = [] %>
<% @under_plays = [] %>


<% @ag_wins = 0 %>
<% @ag_losses = 0 %>
<% @wit_wins = 0 %>
<% @wit_losses = 0 %>
<% @no_losses = 0 %>
<% @no_wins = 0 %>
<% @total_wins = 0 %>
<% @total_losses = 0 %>
<% @sides_wins = 0 %>
<% @sides_losses = 0 %>

<% @low_ag_wins = 0 %>
<% @low_wit_wins = 0 %>
<% @low_no_wins = 0 %>
<% @high_no_wins = 0 %>
<% @high_wit_wins = 0 %>
<% @high_ag_wins = 0 %>

<% @low_ag_losses = 0 %>
<% @low_wit_losses = 0 %>
<% @low_no_losses = 0 %>
<% @high_no_losses = 0 %>
<% @high_wit_losses = 0 %>
<% @high_ag_losses = 0 %>

<% @over_wins = 0 %>
<% @over_losses = 0 %>

<% @under_wins = 0 %>
<% @under_losses = 0 %>


<% @against_percentage %>
<% @with_percentage %>
<% @no_percentage %>

<% if current_user.admin == true %>

	<div id="pick_form">
	
		<%= form_for @pick do |p| %>

			<div>Sport: <%= p.text_field :sport %></div>
		 	<div>Type: <%= p.text_field :cat %></div>
		 	<div>Pick: <%= p.text_field :pick %></div>
		 	<div>Line: <%= p.text_field :line %></div>
		 	<div>Reason: <%= p.text_field :reason %></div>
		 	<div>Line Movement: <%= p.text_field :line_movement %></div>
		 	<div>Consensus: <%= p.text_field :consensus %></div>
		 	<div>Result: <%= p.text_field :result %></div>
		 	<%= p.submit %>



		<% end %>

	</div>

	<% @picks.all.each do |p| %>

		<% if p.result.length == 0 %>

			<% @update.push(p) %>

		<% else %>

			<% @complete.push(p) %>

		<% end %>


	<% end %>

	<div style=" margin-left: 45%">UPDATE PICKS

	<% @update.each do |u| %>

		<% info = u.pick + " " + u.line %>

		<div><%= link_to info, edit_pick_path(u.id) %></div>


	<% end %>

	</div>




	<% @complete.each do |c| %>

		<% if c.cat == "total" %>

			<% @totals.push(c) %>

		
		<% elsif c.cat == "side" %>

			<% @sides.push(c) %>
		
		<% end %>

		<% if c.line_movement == "against" %>

			<% @against_moves.push(c) %>

			<% if c.consensus == "low" %>

				<% @low_ag.push(c) %>

			<% elsif c.consensus == "high" %>

				<% @high_ag.push(c) %>

			<% end %>

		<% elsif c.line_movement == "with" %>

			<% @with_moves.push(c) %>

			<% if c.consensus == "low" %>

				<% @low_wit.push(c) %>

			<% elsif c.consensus == "high" %>

				<% @high_wit.push(c) %>

			<% end %>


		<% elsif c.line_movement == "none" %>

			<% @no_moves.push(c) %>

			<% if c.consensus == "low" %>

				<% @low_no.push(c) %>

			<% elsif c.consensus == "high" %>

				<% @high_no.push(c) %>

			<% end %>


		<% end %>

	<% end %>

	<% @against_moves.each do |a| %>


		<% if a.result == "win" %>

			<% @ag_wins += 1 %>


		<% elsif a.result == "loss" %>

			<% @ag_losses += 1 %>


		<% end %>

	<% end %>

	

	<% @with_moves.each do |a| %>

		<% if a.result == "win" %>

			<% @wit_wins += 1 %>


		<% elsif a.result == "loss" %>

			<% @wit_losses += 1 %>


		<% end %>

	<% end %>

	<% @no_moves.each do |a| %>

		<% if a.result == "win" %>

			<% @no_wins += 1 %>


		<% elsif a.result == "loss" %>

			<% @no_losses += 1 %>


		<% end %>

	<% end %>

	<% x = @ag_wins.to_i %>
	<% y = @ag_losses.to_i %>

	<% z = x + y %>

	<% @low_ag.each do |l| %>

		<% if l.result == "win" %>

			<% @low_ag_wins += 1 %>

		<% elsif l.result == "loss" %>

			<% @low_ag_losses += 1 %>

		<% end %>


	<% end %>

	<% @high_ag.each do |l| %>

		<% if l.result == "win" %>

			<% @high_ag_wins += 1 %>

		<% elsif l.result == "loss" %>

			<% @high_ag_losses += 1 %>

		<% end %>


	<% end %>

	<% @low_wit.each do |l| %>

		<% if l.result == "win" %>

			<% @low_wit_wins += 1 %>

		<% elsif l.result == "loss" %>

			<% @low_wit_losses += 1 %>

		<% end %>


	<% end %>

	<% @high_wit.each do |l| %>

		<% if l.result == "win" %>

			<% @high_wit_wins += 1 %>

		<% elsif l.result == "loss" %>

			<% @high_wit_losses += 1 %>

		<% end %>


	<% end %>

	<% @high_no.each do |l| %>

		<% if l.result == "win" %>

			<% @high_no_wins += 1 %>

		<% elsif l.result == "loss" %>

			<% @high_no_losses += 1 %>

		<% end %>


	<% end %>

	<% @low_no.each do |l| %>

		<% if l.result == "win" %>

			<% @low_no_wins += 1 %>

		<% elsif l.result == "loss" %>

			<% @low_no_losses += 1 %>

		<% end %>


	<% end %>

	<% @totals.each do |t| %>

		<% if t.pick[0].upcase == "O" %>

			<% @over_plays.push(t) %>

		<% elsif t.pick[0].upcase == "U" %>

			<% @under_plays.push(t) %>

		<% end %>

		<% if t.result == "win" %>

			<% @total_wins += 1 %>

		<% elsif t.result == "loss" %>

			<% @total_losses += 1 %>

		<% end %>


	<% end %>

	<% @over_plays.each do |p| %>

		<% if p.result.downcase == "win" %>

			<% @over_wins += 1 %>

		<% elsif p.result.downcase == "loss" %>

			<% @over_losses += 1 %>


		<% end %>



	<% end %>

	<% @under_plays.each do |p| %>

		<% if p.result.downcase == "win" %>

			<% @under_wins += 1 %>

		<% elsif p.result.downcase == "loss" %>

			<% @under_losses += 1 %>


		<% end %>



	<% end %>


	


	<% @totals_prcnt = ((@total_wins.to_f / (@total_wins.to_f + @total_losses.to_f)) * 100).round(2) %>

	<% @totals_prcnt = @totals_prcnt.to_s + "%" %>
	
	<% @totals_record = "(" + @total_wins.to_s + " - " + @total_losses.to_s + ")" %>

	<% @overs_prcnt = (@over_wins.to_f / (@over_wins.to_f + @over_losses.to_f) * 100).round(2) %>

	<% @overs_prcnt = @overs_prcnt.to_s + "%" %>

	<% @overs_record = "(" + @over_wins.to_s + " - " + @over_losses.to_s + ")" %>

	<% @unders_record = "(" + @under_wins.to_s + " - " + @under_losses.to_s + ")" %>

	<% @unders_prcnt = (@under_wins.to_f / (@under_wins.to_f + @under_losses.to_f) * 100).round(2) %>

	<% @unders_prcnt = @unders_prcnt.to_s + "%" %>

	<% @against_percentage = (x.to_f / z.to_f).round(2) %>
	<% @with_percentage = @wit_wins.to_f / (@wit_wins.to_f + @wit_losses.to_f) %>
	
	<% @no_percentage = @no_wins.to_f / (@no_wins.to_f + @no_losses.to_f) %>

	<% @low_ag_prcnt = @low_ag_wins.to_f / (@low_ag_wins + @low_ag_losses) %>
	<% @low_ag_prcnt = (@low_ag_prcnt * 100).round(2) %>
	<% @low_ag_prcnt = @low_ag_prcnt.to_s + "%" %> 

	<% @high_ag_prcnt = @high_ag_wins.to_f / (@high_ag_wins + @high_ag_losses) %>
	<% @high_ag_prcnt = (@high_ag_prcnt * 100).round(2) %>
	<% @high_ag_prcnt = @high_ag_prcnt.to_s + "%" %>

	<% @low_wit_prcnt = @low_wit_wins.to_f / (@low_wit_wins + @low_wit_losses) %>
	<% @low_wit_prcnt = (@low_wit_prcnt * 100).round(2) %>
	<% @low_wit_prcnt = @low_wit_prcnt.to_s + "%" %> 

	<% @high_wit_prcnt = @high_wit_wins.to_f / (@high_wit_wins + @high_wit_losses) %>
	<% @high_wit_prcnt = (@high_wit_prcnt * 100).round(2) %>
	<% @high_wit_prcnt = @high_wit_prcnt.to_s + "%" %>

	<% @high_no_prcnt = @high_no_wins.to_f / (@high_no_wins + @high_no_losses) %>
	<% @high_no_prcnt = (@high_no_prcnt * 100).round(2) %>
	<% @high_no_prcnt = @high_no_prcnt.to_s + "%" %>

	<% @low_no_prcnt = @low_no_wins.to_f / (@low_no_wins + @low_no_losses) %>
	<% @low_no_prcnt = (@low_no_prcnt * 100).round(2) %>
	<% @low_no_prcnt = @low_no_prcnt.to_s + "%" %> 

	<% @against_percentage = (@against_percentage * 100).round(2) %>
	<% @with_percentage = (@with_percentage * 100).round(2) %>
	<% @no_percentage = (@no_percentage * 100).round(2) %>
	
	<div style="margin-top: 3%; margin-bottom: 3%;">AGAINST WIN PERCENTAGE: <%= @against_percentage.to_s + "%" %>

		<div> LOW - AG: <%= @low_ag_prcnt + " " + "(" + @low_ag_wins.to_s + " - " + @low_ag_losses.to_s + ")"  %></div>
		<div> high - AG: <%= @high_ag_prcnt  + " " + "(" + @high_ag_wins.to_s + " - " + @high_ag_losses.to_s + ")"   %></div>
		

	</div>

	<div style="margin-top: 3%; margin-bottom: 3%;">WITH WIN PERCENTAGE: <%= @with_percentage.to_s + "%" %>

		<div> LOW - WIT: <%= @low_wit_prcnt + " " + "(" + @low_wit_wins.to_s + " - " + @low_wit_losses.to_s + ")"   %></div>
		
		<div> high - WIT: <%= @high_wit_prcnt + " " + "(" + @high_wit_wins.to_s + " - " + @high_wit_losses.to_s + ")"   %></div>

	</div>
	
	<div style="margin-top: 10px; margin-bottom: 10px;">NONE WIN PERCENTAGE: <%= @no_percentage.to_s + "%" %>
		
		<div> LOW - NO: <%= @low_no_prcnt + " " + "(" + @low_no_wins.to_s + " - " + @low_no_losses.to_s + ")"  %></div>
		
		<div> high - NO: <%= @high_no_prcnt + " " + "(" + @high_no_wins.to_s + " - " + @high_no_losses.to_s + ")" %></div>


	</div>

	<div style="margin-top: 10px; margin-bottom: 10px;">TOTALS WIN PERCENTAGE: <%= @totals_prcnt %>
		
		<div> OVERS: <%= @overs_prcnt + " " + @overs_record %></div>
		
		<div> UNDERS: <%= @unders_prcnt + " " + @unders_record %></div>


	</div>






<% end %>



